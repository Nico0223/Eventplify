<!DOCTYPE html>
<html>
<head>
    <title>Add Guest</title>    
    <meta charset="UTF-8"> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <link rel="stylesheet" href="css/addGuest.css">
</head>
<body style="margin:0">

<div id="top">
    <div id="homelogo">
        <img src="css/logocropped.png" id="logo">
        <div id ="button2">
            <a href="profile.html"><button type="button" id="b1">Profile</button></a>
        </div>
        <div id ="button1">
            <a href="events.html"><button type="button" id="b1">Events</button></a>
        </div>
    </div>
</div>

<div id="middle">
    <div id="head">
        <p id="header">ADD GUEST</p>
    </div>
    <div id="navigate">
        <a href="guests.html"><button type="button" id="back">ðŸ¡¨ Guests</button></a>
    </div>

    <form id="addGuestForm">
        <div class="form-group">
            <label for="guestname" id="guestnamelabel">Name:</label>
            <input type="text" id="guestname" name="name" placeholder="Guest Name" required>
        </div>
        <div class="form-group">
            <label for="guestcategory" id="guestcategorylabel">Category:</label>
            <input type="text" id="guestcategory" name="category" placeholder="Category">
        </div>
        <div class="form-group">
            <label for="gueststatus" id="gueststatuslabel">Status:</label>
            <select id="gueststatus" name="status">
                <option value="Pending">Pending</option>
                <option value="Not Going">Not Going</option>
                <option value="Going">Going</option>
            </select>
        </div>
        <input type="submit" id="confirmbutton" value="Confirm">
    </form>
</div>

<div id="footer">
    <div id="container">
        <a href="collaborators.html">
            <button type="button" class="footerbutton" id="collaborators">
                <img src="css/collaborators_icon_black.png" class="btnicon">
                <p class="btnlabel">Collaborators</p>
            </button>
        </a>
        <a href="guests.html">
            <button type="button" class="footerbutton" id="guest">
                <img src="css/guest_icon_black.png" class="btnicon">
                <p class="btnlabel">Guest</p>
            </button>
        </a>
        <a href="todo.html">
            <button type="button" class="footerbutton" id="todo">
                <img src="css/todo_icon_black.png" class="btnicon">
                <p class="btnlabel">To-Do</p>
            </button>
        </a>
        <a href="budget.html">
            <button type="button" class="footerbutton" id="budget">
                <img src="css/budget_icon_black.png" class="btnicon">
                <p class="btnlabel">Budget</p>
            </button>
        </a>
        <a href="chat.html">
            <button type="button" class="footerbutton2" id="chat">
                <img src="css/chat_icon_black.png" class="btnicon">
                <p class="btnlabel">Chat</p>
            </button>
        </a>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const addGuestForm = document.getElementById('addGuestForm');

    addGuestForm.addEventListener('submit', async (e) => {
        e.preventDefault();

        const formData = new FormData(addGuestForm);
        const formDataObj = {};
        formData.forEach((value, key) => {
            formDataObj[key] = value;
        });

        try {
            const response = await fetch('/guests/add', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(formDataObj)
            });

            if (!response.ok) {
                throw new Error('Failed to add guest');
            }

            const newGuest = await response.json();
            console.log('New guest added:', newGuest);

            // Redirect to guests.html after successful submission (optional)
            window.location.href = 'guests.html';

        } catch (error) {
            console.error('Error adding guest:', error);
            // Handle error in UI if needed
        }
    });
});
</script>

</body>
</html>
